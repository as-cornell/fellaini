uuid: 4b6d83b9-0503-497d-99ce-a752b3358c11
langcode: en
status: true
dependencies:
  enforced:
    module:
      - as_people_stub
_core:
  default_config_hash: jW47TsojTCtMKOJ8qvyjkrdiun0c0MJhQdVU3RRVhAs
id: people_stub_college_staff
class: null
field_plugin_method: null
cck_plugin_method: null
migration_tags: null
migration_group: people
label: 'Migrate college staff from People D8 to AS D8'
source:
  plugin: url
  data_fetcher_plugin: http
  data_parser_plugin: json
  constants:
    person_base_path: 'https://asd8.as.cornell.edu/people'
  urls: 'https://people.asd8.as.cornell.edu/people-stubs-rest-college-staff'
  item_selector: /
  ids:
    uuid:
      type: string
  fields:
    -
      name: uuid
      label: uuid
      selector: uuid
    -
      name: netid
      label: NetID
      selector: field_person_netid
    -
      name: title
      label: Title
      selector: title
    -
      name: field_person_last_name
      label: Title
      selector: field_person_last_name
    -
      name: field_person_type
      label: 'Person Type'
      selector: field_person_type
    -
      name: field_departments_programs
      label: 'Departments and Programs'
      selector: field_departments_programs
    -
      name: link
      label: Link
      selector: view_node
process:
  type:
    plugin: default_value
    default_value: person
  name: title
  field_person_last_name: field_person_last_name
  field_netid: netid
  field_people_uuid: uuid
  field_link/uri:
    plugin: concat
    source:
      - constants/person_base_path
      - link
  field_departments_and_programs:
    -
      plugin: skip_on_empty
      method: process
      source: field_departments_programs
    -
      plugin: explode
      delimiter: ', '
    -
      plugin: entity_lookup
      entity_type: taxonomy_term
      bundle: departments_programs
      value_key: name
  field_person_type:
    plugin: entity_lookup
    source: field_person_type
  uid:
    plugin: default_value
    default_value: 1
destination:
  plugin: 'entity:page_component_entity'
migration_dependencies: null
