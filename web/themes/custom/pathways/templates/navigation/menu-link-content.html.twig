{#
/**
 * @file
 * Default theme implementation to present a menu link entity entity.
 *
 * Available variables:
 * - menu_link_content: Menu link entity.
 * - show_item_link: Indicator for menu item link.
 *
 * @see template_preprocess_menu_link_content()
 *
 * @ingroup themeable
 */
#}
{% import _self as menu %}

{{ menu.menu_link_content(attributes, menu_link_content, show_item_link, content, elements) }}

{% macro menu_link_content(attributes, menu_link_content, show_item_link, content, elements) %}
  {% import _self as menu_link_content %}
  {% set menu_dropdown_classes = [
    'menu-dropdown',
    elements['#menu_level'] is defined ? 'menu-dropdown-' ~ elements['#menu_level'],
    elements['#view_mode'] ? 'menu-type-' ~ elements['#view_mode'],
  ] %}

  {# vardumper(elements.children) #}

  {# provide a menu link id to pass to menu plug block functions #}
  {# set menuLinkID = attributes.storage['data-quickedit-entity-id'] #}
  {# get menu link id from cache keys #}
  {% set menuLinkID = elements['#cache']['keys'][2] %}
  {# check for children #}
  {% if elements.children %}
  {% set menuChildren = TRUE %}
  {% endif %}
    {% if show_item_link %}
      {{ link(menu_link_content.getTitle(), menu_link_content.getUrlObject()) }}
    {% endif %}
    {# implements as_menu_plug #}
    {% if menuLinkID %}
      {{ drupal_block('menu_plug_block', {menu_link_id:menuLinkID, menu_children:menuChildren}) }}
    {% endif %}
    {% if content %}


      {{ content }}
    {% endif %}

{% endmacro %}
