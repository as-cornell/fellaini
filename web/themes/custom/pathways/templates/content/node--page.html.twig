
{# 

/* -------------------------

Title: node--page.html.twig
Descr: Sets up variables and content for _basic-page.twig

--------------------------- */ 

#}


{# Set up main
    - extra class main
    - base class page
    - modifier basic
 #}
{% set main_element_extra_classes = ['main'] %}
{% set main_element_base_class = main_element_base_class | default('page') %}
{% set main_element_modifiers = ['basic'] %}

{# 
    - set sidebar type
    - if sidebar != none turn on sidebar
    - set up sidebar_nav
    - add has-sideber to main_element_modifiers
    - set location of sidebar
    - set sidebar content to field_sidebar_components 
    - add sidebar base class and modifier basic-page   
#}

{% set sidebarType = node.field_sidebar_type.value %}

{% if sidebarType != "none" %}
    {# If sidebarContent #}
    {% if node.field_sidebar_components.target_id %}
        {% set sidebarContent = true %}
    {% endif %}

    {% set main_element_modifiers = main_element_modifiers|merge(['has-sidebar']) %}
    
    {# Set sidebar_nav #}
    {% set sidebar_nav %}
        {{ drupal_entity('block', 'mainnavigation_2',  check_access=false) }}
    {% endset %}
{% endif %}

{# 
    - set aside to false
    - if aside_components set to ture, and add has-aside to main 
#}

{% set aside = false %}

{% if node.field_aside_components.target_id %}
    {% set aside = true %}
    {% set main_element_modifiers = main_element_modifiers|merge(['has-aside']) %}
{% endif %}

{% include "@pages/basic-page/_basic-page.twig" with {
    title : label,
    main_element_modifiers : main_element_modifiers,
    
    main_content : content.field_page_components_entity,
    aside_content : content.field_aside_components,
    sidebar_content : content.field_sidebar_components,


    content_wrapper_modifiers : content_wrapper_modifiers,
    main_content_modifiers : main_content_modifiers
    }
%}